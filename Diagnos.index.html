<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROPART DIAGNOSTIC PRO - Fernando Mill√°n</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Rajdhani:wght@600;700&display=swap');
        body{background:linear-gradient(135deg,#0a0e27,#1a1f3a);color:#e2e8f0;font-family:'Rajdhani',sans-serif;margin:0;padding:0}
        .orbitron{font-family:'Orbitron',sans-serif}
        .glass{background:rgba(19,24,41,.85);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.08)}
        .glow{box-shadow:0 0 20px rgba(0,212,255,.4)}
        .btn-pro{background:linear-gradient(135deg,#1e3a8a,#1e40af);border:1px solid rgba(0,212,255,.3);cursor:pointer;transition:all .3s}
        .btn-pro:active{transform:scale(.95);box-shadow:0 0 25px rgba(0,212,255,.6)}
        .hidden{display:none!important}
        .card-sensor{background:linear-gradient(135deg,rgba(30,58,138,.3),rgba(30,64,175,.2));border:1px solid rgba(0,212,255,.2);border-left:4px solid #06b6d4}
        .data-display{font-size:1.5rem;font-weight:900}
        .tab-btn{padding:.75rem 1.5rem;background:#1e293b;color:#94a3b8;border:none;border-radius:.5rem;font-weight:600;cursor:pointer;white-space:nowrap}
        .tab-btn.active{background:linear-gradient(90deg,#06b6d4,#3b82f6);color:#fff}
    </style>
</head>
<body>
    <div style="background:linear-gradient(180deg,rgba(19,24,41,.98),rgba(10,14,39,.95));border-bottom:2px solid #06b6d4" class="p-4 flex justify-between items-center sticky top-0 z-50">
        <div class="flex items-center gap-3 cursor-pointer" onclick="showView('home')">
            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center glow">
                <i class="fas fa-microchip text-white text-2xl"></i>
            </div>
            <div>
                <h1 class="orbitron font-black text-base text-white">PROPART</h1>
                <p class="text-[10px] text-cyan-400 font-bold">DIAGNOSTIC PRO</p>
            </div>
        </div>
        <div class="flex gap-3 items-center">
            <button id="bt-status" class="text-gray-500"><i class="fas fa-bluetooth text-2xl"></i></button>
            <button onclick="toggleCart()" class="relative">
                <i class="fas fa-shopping-cart text-white text-xl"></i>
                <span id="cart-badge" class="absolute -top-2 -right-2 bg-red-500 text-[9px] w-5 h-5 rounded-full flex items-center justify-center font-bold">0</span>
            </button>
        </div>
    </div>
    <div class="p-4 pb-24">
        <div id="view-home">
            <div class="grid grid-cols-2 gap-4 mb-6">
                <button onclick="showView('scanner')" class="btn-pro p-6 rounded-xl text-center">
                    <i class="fas fa-chart-line text-cyan-400 text-4xl mb-3"></i>
                    <div class="text-xs font-bold text-white">DIAGN√ìSTICO</div>
                </button>
                <button onclick="showView('dtc')" class="btn-pro p-6 rounded-xl text-center">
                    <i class="fas fa-database text-yellow-400 text-4xl mb-3"></i>
                    <div class="text-xs font-bold text-white">C√ìDIGOS DTC</div>
                </button>
                <button onclick="showView('wiring')" class="btn-pro p-6 rounded-xl text-center">
                    <i class="fas fa-bolt text-orange-400 text-4xl mb-3"></i>
                    <div class="text-xs font-bold text-white">DIAGRAMAS</div>
                </button>
                <button onclick="showView('pinouts')" class="btn-pro p-6 rounded-xl text-center">
                    <i class="fas fa-microchip text-green-400 text-4xl mb-3"></i>
                    <div class="text-xs font-bold text-white">PINOUTS ECU</div>
                </button>
                <button onclick="showView('inventory')" class="btn-pro p-6 rounded-xl text-center">
                    <i class="fas fa-warehouse text-purple-400 text-4xl mb-3"></i>
                    <div class="text-xs font-bold text-white">REFACCIONES</div>
                </button>
                <button onclick="alert('Contrase√±a: 1234')" class="btn-pro p-6 rounded-xl text-center">
                    <i class="fas fa-user-gear text-red-400 text-4xl mb-3"></i>
                    <div class="text-xs font-bold text-white">ADMIN</div>
                </button>
            </div>
            <div class="glass rounded-xl p-4 border border-cyan-500/30">
                <div class="flex items-center gap-2 mb-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <h3 class="text-cyan-400 font-bold text-sm">SISTEMA ACTIVO</h3>
                </div>
                <div class="space-y-2 text-xs">
                    <div class="flex justify-between"><span class="text-gray-400">PROPIETARIO:</span><span class="text-white font-bold">FERNANDO MILL√ÅN</span></div>
                    <div class="flex justify-between"><span class="text-gray-400">TEL√âFONO:</span><span class="text-cyan-400">777-683-8196</span></div>
                    <div class="flex justify-between"><span class="text-gray-400">VERSI√ìN:</span><span class="text-green-400">v1.0.0 PRO</span></div>
                </div>
            </div>
        </div>
        <div id="view-scanner" class="hidden">
            <div class="flex gap-2 mb-4 overflow-x-auto pb-2">
                <button class="tab-btn active" onclick="switchTab('live')">EN VIVO</button>
                <button class="tab-btn" onclick="switchTab('injectors')">INYECTORES</button>
                <button class="tab-btn" onclick="switchTab('coils')">BOBINAS</button>
                <button class="tab-btn" onclick="switchTab('diesel')">DIESEL</button>
            </div>
            <div class="glass rounded-xl p-4 mb-4 border border-cyan-500/30">
                <div class="flex justify-between items-center mb-3">
                    <h3 class="text-white font-bold text-xs"><i class="fas fa-wifi text-cyan-400 mr-2"></i>ELM327</h3>
                    <span id="conn-status" class="text-[9px] px-3 py-1 rounded-full bg-red-900 text-red-200 font-bold">DESCONECTADO</span>
                </div>
                <button onclick="toggleBT()" id="btn-connect" class="w-full bg-gradient-to-r from-blue-600 to-cyan-500 py-3 rounded-lg font-bold text-xs glow">
                    <i class="fab fa-bluetooth mr-2"></i>CONECTAR BLUETOOTH
                </button>
            </div>
            <div id="tab-live">
                <div class="grid grid-cols-2 gap-3">
                    <div class="card-sensor p-3 rounded-xl"><div class="text-[9px] text-gray-400 mb-1 font-bold">RPM</div><div id="val-rpm" class="data-display text-cyan-400 orbitron">0</div></div>
                    <div class="card-sensor p-3 rounded-xl"><div class="text-[9px] text-gray-400 mb-1 font-bold">TEMP</div><div id="val-temp" class="data-display text-orange-400 orbitron">0¬∞C</div></div>
                    <div class="card-sensor p-3 rounded-xl"><div class="text-[9px] text-gray-400 mb-1 font-bold">MAF</div><div id="val-maf" class="data-display text-green-400 orbitron">0.0</div></div>
                    <div class="card-sensor p-3 rounded-xl"><div class="text-[9px] text-gray-400 mb-1 font-bold">MAP</div><div id="val-map" class="data-display text-yellow-400 orbitron">0</div></div>
                    <div class="card-sensor p-3 rounded-xl"><div class="text-[9px] text-gray-400 mb-1 font-bold">TPS</div><div id="val-tps" class="data-display text-purple-400 orbitron">0%</div></div>
                    <div class="card-sensor p-3 rounded-xl"><div class="text-[9px] text-gray-400 mb-1 font-bold">VOLT</div><div id="val-volt" class="data-display text-blue-400 orbitron">0.0V</div></div>
                </div>
            </div>
            <div id="tab-injectors" class="hidden">
                <div class="glass rounded-xl p-4 border border-cyan-500/30">
                    <h3 class="text-cyan-400 font-bold mb-4">INYECTORES</h3>
                    <div class="space-y-3">
                        <div><div class="flex justify-between text-xs mb-1"><span class="text-white">INYECTOR 1</span><span id="inj-1" class="text-green-400">0.00 ms</span></div><div class="w-full bg-gray-800 rounded-full h-3"><div id="bar-1" style="width:0%;height:12px;background:linear-gradient(90deg,#22c55e,#eab308,#ef4444);border-radius:6px"></div></div></div>
                        <div><div class="flex justify-between text-xs mb-1"><span class="text-white">INYECTOR 2</span><span id="inj-2" class="text-green-400">0.00 ms</span></div><div class="w-full bg-gray-800 rounded-full h-3"><div id="bar-2" style="width:0%;height:12px;background:linear-gradient(90deg,#22c55e,#eab308,#ef4444);border-radius:6px"></div></div></div>
                        <div><div class="flex justify-between text-xs mb-1"><span class="text-white">INYECTOR 3</span><span id="inj-3" class="text-green-400">0.00 ms</span></div><div class="w-full bg-gray-800 rounded-full h-3"><div id="bar-3" style="width:0%;height:12px;background:linear-gradient(90deg,#22c55e,#eab308,#ef4444);border-radius:6px"></div></div></div>
                        <div><div class="flex justify-between text-xs mb-1"><span class="text-white">INYECTOR 4</span><span id="inj-4" class="text-green-400">0.00 ms</span></div><div class="w-full bg-gray-800 rounded-full h-3"><div id="bar-4" style="width:0%;height:12px;background:linear-gradient(90deg,#22c55e,#eab308,#ef4444);border-radius:6px"></div></div></div>
                    </div>
                </div>
            </div>
            <div id="tab-coils" class="hidden">
                <div class="glass rounded-xl p-4 border border-cyan-500/30">
                    <h3 class="text-cyan-400 font-bold mb-4">BOBINAS</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <div id="coil-1" class="p-4 rounded-xl text-center bg-gray-800/50 border border-gray-700"><div class="font-bold mb-2">BOBINA 1</div><div class="text-4xl text-gray-600">‚óè</div></div>
                        <div id="coil-2" class="p-4 rounded-xl text-center bg-gray-800/50 border border-gray-700"><div class="font-bold mb-2">BOBINA 2</div><div class="text-4xl text-gray-600">‚óè</div></div>
                        <div id="coil-3" class="p-4 rounded-xl text-center bg-gray-800/50 border border-gray-700"><div class="font-bold mb-2">BOBINA 3</div><div class="text-4xl text-gray-600">‚óè</div></div>
                        <div id="coil-4" class="p-4 rounded-xl text-center bg-gray-800/50 border border-gray-700"><div class="font-bold mb-2">BOBINA 4</div><div class="text-4xl text-gray-600">‚óè</div></div>
                    </div>
                </div>
            </div>
            <div id="tab-diesel" class="hidden">
                <div class="glass rounded-xl p-4 border border-cyan-500/30">
                    <h3 class="text-cyan-400 font-bold mb-3">DIESEL</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="p-3 bg-slate-800 rounded"><div class="text-[9px] text-gray-400 mb-1">PRESI√ìN</div><div id="val-rail" class="text-2xl font-black text-green-400 orbitron">0 bar</div></div>
                        <div class="p-3 bg-slate-800 rounded"><div class="text-[9px] text-gray-400 mb-1">EGR</div><div id="val-egr" class="text-2xl font-black text-yellow-400 orbitron">0%</div></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="view-dtc" class="hidden">
            <h2 class="text-cyan-400 font-bold text-lg mb-4">C√ìDIGOS DTC</h2>
            <div class="glass rounded-xl p-4 border border-cyan-500/30">
                <button onclick="alert('Base de datos: 50+ c√≥digos\\nP0300-P0304, P0171, P0420, etc.')" class="w-full bg-gradient-to-r from-cyan-500 to-blue-600 py-4 rounded-xl font-bold">
                    <i class="fas fa-search mr-2"></i>BUSCAR C√ìDIGOS
                </button>
            </div>
        </div>
        <div id="view-wiring" class="hidden">
            <h2 class="text-cyan-400 font-bold text-lg mb-4">DIAGRAMAS</h2>
            <div class="glass p-4 rounded-xl border border-orange-500/30 mb-3">
                <i class="fas fa-bolt text-orange-400 text-2xl mr-3"></i><span class="text-white font-bold">VW JETTA A4</span>
            </div>
            <div class="glass p-4 rounded-xl border border-orange-500/30">
                <i class="fas fa-bolt text-orange-400 text-2xl mr-3"></i><span class="text-white font-bold">NISSAN TSURU</span>
            </div>
        </div>
        <div id="view-pinouts" class="hidden">
            <h2 class="text-cyan-400 font-bold text-lg mb-4">PINOUTS ECU</h2>
            <div class="glass p-4 rounded-xl border border-green-500/30 mb-3">
                <i class="fas fa-microchip text-green-400 text-2xl mr-3"></i><span class="text-white font-bold">BOSCH ME7.5 (121)</span>
            </div>
            <div class="glass p-4 rounded-xl border border-green-500/30">
                <i class="fas fa-microchip text-green-400 text-2xl mr-3"></i><span class="text-white font-bold">NISSAN ECCS (76)</span>
            </div>
        </div>
        <div id="view-inventory" class="hidden">
            <h2 class="text-cyan-400 font-bold text-lg mb-4">REFACCIONES</h2>
            <div class="glass rounded-xl p-4 border border-cyan-500/20 mb-3">
                <div class="flex justify-between items-center">
                    <div><div class="text-xs text-cyan-400 font-bold">BOBINAS</div><div class="font-bold text-white">BOBINA JETTA A4</div></div>
                    <div class="text-right"><div class="text-green-400 font-black text-lg">$680</div><button onclick="addCart()" class="bg-blue-600 px-3 py-1 rounded text-xs font-bold mt-1">AGREGAR</button></div>
                </div>
            </div>
        </div>
    </div>
    <div style="position:fixed;bottom:0;width:100%" class="glass border-t border-cyan-500/20 p-3 text-center z-40">
        <div class="text-cyan-400 font-bold text-xs">PROPART DIAGNOSTIC</div>
        <div class="text-[9px] text-gray-500">Fernando Mill√°n ¬© 2026 | 777-683-8196</div>
    </div>
    <div id="modal-cart" class="hidden" style="position:fixed;inset:0;background:rgba(0,0,0,.95);z-index:100;padding:1rem">
        <div class="flex justify-between border-b border-gray-700 pb-3 mb-4">
            <h2 class="text-white font-bold">COTIZACI√ìN</h2>
            <button onclick="toggleCart()" class="text-red-400 text-2xl">‚úï</button>
        </div>
        <div id="cart-items"></div>
        <button onclick="sendWA()" class="w-full bg-green-600 py-4 rounded-xl font-bold mt-4">üí¨ WHATSAPP</button>
    </div>
    <script>
let s={view:'home',tab:'live',bt:false,cart:[],data:{rpm:0,temp:0,maf:0,map:0,tps:0,volt:0,inj1:0,inj2:0,inj3:0,inj4:0,coil1:0,coil2:0,coil3:0,coil4:0,rail:0,egr:0}};
function showView(v){document.querySelectorAll('[id^="view-"]').forEach(e=>e.classList.add('hidden'));let e=document.getElementById('view-'+v);e&&(e.classList.remove('hidden'),s.view=v)}
function switchTab(t){document.querySelectorAll('.tab-btn').forEach(e=>e.classList.remove('active'));event.target.classList.add('active');document.querySelectorAll('[id^="tab-"]').forEach(e=>e.classList.add('hidden'));let e=document.getElementById('tab-'+t);e&&(e.classList.remove('hidden'),s.tab=t)}
async function toggleBT(){s.bt?disconnectBT():await connectBT()}
async function connectBT(){
    if(!navigator.bluetooth){
        alert('‚ö†Ô∏è BLUETOOTH WEB NO SOPORTADO\\n\\nREQUISITOS:\\n‚úì Chrome en Android\\n‚úì Edge en Windows\\n\\nPASOS:\\n1. Emparejar ELM327 en Ajustes Bluetooth\\n2. Abrir esta app en Chrome\\n3. Intentar conexi√≥n');
        sim();
        return;
    }
    try{
        console.log('üîç Buscando ELM327...');
        let d=await navigator.bluetooth.requestDevice({
            filters:[
                {namePrefix:'OBDII'},
                {namePrefix:'OBD'},
                {namePrefix:'ELM327'},
                {namePrefix:'ELM'},
                {namePrefix:'V-LINK'},
                {namePrefix:'Vgate'},
                {namePrefix:'CHX'},
                {namePrefix:'KONNWEI'},
                {namePrefix:'VEEPEAK'}
            ],
            optionalServices:[
                '0000fff0-0000-1000-8000-00805f9b34fb',
                '00001101-0000-1000-8000-00805f9b34fb'
            ]
        });
        console.log('‚úì Dispositivo:',d.name);
        console.log('üîó Conectando GATT...');
        let srv=await d.gatt.connect();
        console.log('‚úì GATT conectado');
        console.log('üì° Obteniendo servicio...');
        let svc=await srv.getPrimaryService('0000fff0-0000-1000-8000-00805f9b34fb');
        console.log('‚úì Servicio obtenido');
        console.log('‚ö° Configurando caracter√≠sticas...');
        let tx=await svc.getCharacteristic('0000fff1-0000-1000-8000-00805f9b34fb');
        let rx=await svc.getCharacteristic('0000fff2-0000-1000-8000-00805f9b34fb');
        console.log('‚úì Caracter√≠sticas configuradas');
        window.btTx=tx;
        window.btRx=rx;
        await rx.startNotifications();
        rx.addEventListener('characteristicvaluechanged',handleData);
        console.log('‚úì Notificaciones activadas');
        s.bt=true;
        updateUI(true);
        await initELM();
        alert('‚úÖ CONECTADO EXITOSAMENTE\\n\\n'+(d.name||'ELM327'));
    }catch(e){
        console.error('‚ùå Error:',e);
        if(!e.message.includes('cancel')){
            alert('‚ö†Ô∏è ERROR DE CONEXI√ìN\\n\\n'+e.message+'\\n\\nVERIFICA:\\n‚úì ELM327 encendido\\n‚úì Emparejado en Bluetooth\\n‚úì Cerca del dispositivo\\n\\nACTIVANDO SIMULACI√ìN...');
            setTimeout(sim,1500);
        }
    }
}
async function initELM(){
    console.log('üîß Inicializando ELM327...');
    await sendCmd('ATZ\\r');
    await sleep(2000);
    await sendCmd('ATE0\\r');
    await sleep(300);
    await sendCmd('ATL0\\r');
    await sleep(300);
    await sendCmd('ATS0\\r');
    await sleep(300);
    await sendCmd('ATH0\\r');
    await sleep(300);
    await sendCmd('ATSP0\\r');
    await sleep(500);
    console.log('‚úÖ ELM327 listo');
    startRead();
}
async function sendCmd(c){
    if(!window.btTx)return;
    try{
        let d=new TextEncoder().encode(c);
        await window.btTx.writeValue(d);
        console.log('TX:',c.trim());
    }catch(e){
        console.error('Error TX:',e);
    }
}
function handleData(ev){
    let v=new TextDecoder().decode(ev.target.value);
    if(v.trim()){
        console.log('RX:',v.trim());
        parseData(v);
    }
}
function parseData(d){
    let c=d.replace(/\\s+/g,'').toUpperCase();
    if(c.includes('410C')){
        let b=c.match(/410C([0-9A-F]{4})/);
        if(b)s.data.rpm=parseInt(b[1],16)/4;
    }
    if(c.includes('4105')){
        let b=c.match(/4105([0-9A-F]{2})/);
        if(b)s.data.temp=parseInt(b[1],16)-40;
    }
    if(c.includes('4110')){
        let b=c.match(/4110([0-9A-F]{4})/);
        if(b)s.data.maf=parseInt(b[1],16)/100;
    }
    if(c.includes('410B')){
        let b=c.match(/410B([0-9A-F]{2})/);
        if(b)s.data.map=parseInt(b[1],16);
    }
    if(c.includes('4111')){
        let b=c.match(/4111([0-9A-F]{2})/);
        if(b)s.data.tps=(parseInt(b[1],16)*100)/255;
    }
    if(c.includes('V')){
        let v=c.match(/([0-9.]+)V/);
        if(v)s.data.volt=parseFloat(v[1]);
    }
    update();
}
function startRead(){
    window.readIv=setInterval(async()=>{
        if(!s.bt||!window.btTx)return;
        await sendCmd('010C\\r');
        await sleep(150);
        await sendCmd('0105\\r');
        await sleep(150);
        await sendCmd('0110\\r');
        await sleep(150);
        await sendCmd('010B\\r');
        await sleep(150);
        await sendCmd('0111\\r');
        await sleep(150);
        await sendCmd('ATRV\\r');
        await sleep(150);
    },2000);
}
function sleep(ms){return new Promise(r=>setTimeout(r,ms))}
function disconnectBT(){
    s.bt=false;
    if(window.iv)clearInterval(window.iv);
    if(window.readIv)clearInterval(window.readIv);
    if(window.btDevice&&window.btDevice.gatt.connected){
        window.btDevice.gatt.disconnect();
        console.log('üì¥ Desconectado');
    }
    window.btTx=null;
    window.btRx=null;
    updateUI(false);
    s.data={rpm:0,temp:0,maf:0,map:0,tps:0,volt:0,inj1:0,inj2:0,inj3:0,inj4:0,coil1:0,coil2:0,coil3:0,coil4:0,rail:0,egr:0};
    update();
}
function sim(){s.bt=true;updateUI(true);window.iv=setInterval(()=>{s.data={rpm:750+Math.random()*200,temp:88+Math.random()*8,maf:2+Math.random()*4,map:30+Math.random()*15,tps:Math.random()*10,volt:13.9+Math.random()*.4,inj1:2.2+Math.random()*1.5,inj2:2.2+Math.random()*1.5,inj3:2.2+Math.random()*1.5,inj4:2.2+Math.random()*1.5,coil1:Math.random()>.3,coil2:Math.random()>.3,coil3:Math.random()>.3,coil4:Math.random()>.3,rail:250+Math.random()*100,egr:Math.random()*50};update()},1e3)}
function updateUI(c){let st=document.getElementById('conn-status'),bt=document.getElementById('btn-connect'),ic=document.getElementById('bt-status');c?(st.textContent='CONECTADO',st.className='text-[9px] px-3 py-1 rounded-full bg-green-900 text-green-200 font-bold',bt.innerHTML='<i class="fas fa-plug-circle-xmark mr-2"></i>DESCONECTAR',bt.className='w-full bg-gradient-to-r from-red-600 to-pink-500 py-3 rounded-lg font-bold text-xs',ic.className='text-cyan-400'):(st.textContent='DESCONECTADO',st.className='text-[9px] px-3 py-1 rounded-full bg-red-900 text-red-200 font-bold',bt.innerHTML='<i class="fab fa-bluetooth mr-2"></i>CONECTAR BLUETOOTH',bt.className='w-full bg-gradient-to-r from-blue-600 to-cyan-500 py-3 rounded-lg font-bold text-xs glow',ic.className='text-gray-500')}
function update(){document.getElementById('val-rpm').textContent=Math.floor(s.data.rpm);document.getElementById('val-temp').textContent=Math.floor(s.data.temp)+'¬∞C';document.getElementById('val-maf').textContent=s.data.maf.toFixed(1);document.getElementById('val-map').textContent=Math.floor(s.data.map);document.getElementById('val-tps').textContent=Math.floor(s.data.tps)+'%';document.getElementById('val-volt').textContent=s.data.volt.toFixed(1)+'V';document.getElementById('val-rail').textContent=Math.floor(s.data.rail)+' bar';document.getElementById('val-egr').textContent=Math.floor(s.data.egr)+'%';for(let i=1;i<=4;i++){let ms=s.data['inj'+i].toFixed(2),w=(ms/8)*100;document.getElementById('inj-'+i).textContent=ms+' ms';document.getElementById('bar-'+i).style.width=w+'%';let c=document.getElementById('coil-'+i),a=s.data['coil'+i];c.querySelector('div:last-child').style.color=a?'#22c55e':'#6b7280';c.style.background=a?'rgba(34,197,94,.3)':'rgba(107,114,128,.1)'}}
function toggleCart(){document.getElementById('modal-cart').classList.toggle('hidden')}
function addCart(){s.cart.push({n:'BOBINA JETTA A4',p:680});document.getElementById('cart-badge').textContent=s.cart.length;let h='';s.cart.forEach((e,i)=>h+=`<div class="glass p-3 rounded mb-2 flex justify-between"><span>${e.n}</span><span class="text-green-400">$${e.p}</span></div>`);document.getElementById('cart-items').innerHTML=h}
function sendWA(){if(!s.cart.length)return alert('Carrito vac√≠o');let m='*COTIZACI√ìN PROPART*\\n\\n',t=0;s.cart.forEach((e,i)=>{m+=`${i+1}. ${e.n} - $${e.p}\\n`;t+=e.p});m+=`\\n*TOTAL: $${t}*\\n\\nFernando Mill√°n\\n777-683-8196`;window.open('https://wa.me/527776838196?text='+encodeURIComponent(m))}
    </script>
</body>
</html>
